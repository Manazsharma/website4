---
title: Journald Receiver - Data Input and System Documentation
seoTitle: Journald Receiver - Data Input and System Documentation
description: This blog tells about Journald Receiver, its role in centralized
  log management, and its compatibility with log distributions.
img: /img/resources/journald-receiver-image1.png
alt: Journald Receiver
slug: journald-receiver-system-documentation
authors:
  - openobserve-team
publishDate: 2024-07-18
tags:
  - Journald Receiver
  - systemd journal
  - OpenTelemetry Collector
  - centralized log management
  - log distributions compatibility
---
<h2>Introduction to Journald Receiver


![Introduction to Journald Receiver](/img/resources/journald-receiver-image2.png "Introduction to Journald Receiver")


</h2>

<p>
Your Linux system hums with activity, constantly generating a wealth of data about its inner workings. But how do you tap into this valuable stream of information? Enter journald receivers, powerful tools that allow you to capture and process system messages in real-time.
</p>
<h3>Overview of Journald Receiver </h3>

<p>
The Journald Receiver is a component of the OpenTelemetry Collector Contrib that parses Journald events from the systemd journal. It is currently in the alpha stage for logs, indicating that it is an early release and may have some limitations or breaking changes in future releases.
</p>
<h3>Compatibility of Journald Receiver</h3>

<p>
The Journald Receiver is compatible with the following log distributions:
</p>
<ul>

<li>OpenObserve

<li>contrib

<li>observiq

<li>splunk

<li>sumo
</li>
</ul>
<p>
This means that the receiver can be used with these distributions to collect and process logs from the systemd journal.
</p>
<h3>Role of Journald Receiver in Centralized Log Management</h3>

<p>
The Journald Receiver plays a role in centralized log management by allowing you to collect logs from the systemd journal and send them to a centralized location for analysis and storage. By using the receiver, you can:
</p>
<ul>

<li>Collect logs from multiple systems running systemd

<li>Filter logs based on various criteria such as unit and priority

<li>Store collected logs in a centralized location for long-term retention and analysis

<li>Integrate with other log management tools and platforms
</li>
</ul>
<p>
This maintains a centralized view of all logs generated by systems running systemd, making it easier to analyze system behavior. 
</p>
<p>
<a href="https://openobserve.ai/contactus">Get started for FREE with OpenObserve</a>
</p>
<p>
In the next section, you will learn about the Journald Receiver Requirements.
</p>
<h2>Journald Receiver Requirements</h2>

<p>
To use the Journald Receiver effectively, you need to understand the requirements for its proper functioning.
</p>
<h3>Journalctl Binary Presence in the Agent's $PATH</h3>

<p>
The Journald Receiver relies on the journalctl binary to parse Journald events from the systemd journal. Therefore, the journalctl binary must be present in the agent's $PATH. This ensures that the receiver can correctly execute the journalctl command to retrieve the journal entries.
</p>
<h3>Collector's User Permissions for Accessing the Journal</h3>

<p>
The Journald Receiver requires the collector's user to have the necessary permissions to access the journal. This includes the ability to read the journal files and execute the journalctl command. The collector's user must have the necessary permissions to access the journal, which can be achieved by running the collector as a user with sufficient privileges.
</p>
<p>
By understanding these requirements, you can effectively use the Journald Receiver to collect and process logs from the systemd journal.
</p>
<p>
In the next section you will learn how to configure journald receiver.
</p>
<h2>Configuring Journald Receiver</h2>

<p>
To use the Journald Receiver effectively, you have to configure it correctly. This section provide a details on configuring the Journald Receiver.
</p>
<p>
Outline of Configuration Fields
</p>
<p>
The Journald Receiver configuration file is a JSON file that contains various fields that control the behavior of the receiver. The following are the key fields in the configuration file:
</p>
<ul>

<li>Directory and File Settings 

<ul><li>journal_path: The path to the journal files.

<li>journalctl_path: The path to the journalctl binary.
</li>
</ul>


<li>Selecting Start Point 

<ul><li>start_point: The start point for log reading.

<li>start_point_type: The type of start point (e.g., boot, now, latest).
</li>
</ul>


<li>Configuring Units and Identifiers 

<ul><li>units: The units to include in the log entries.

<li>identifiers: The identifiers to include in the log entries.
</li>
</ul>


<li>Use of Matches and Priority

<ul><li>matches: The matches to include in the log entries.

<li>priority: The priority for filtering output.
</li>
</ul>


<li>Applying Grep with Dmesg

<ul><li>grep: The grep command to use for entry filtering.

<li>dmesg: The dmesg command to use for managing kernel messages.
</li>
</ul>


<li>Setting Storage Options 

<ul><li>storage: The storage options for cursor management.
</li>
</ul>


<li>Retry for Handling 

<ul><li>retry: The retry policies for handling log reading and transmission failures.
</li>
</ul>
<p></ul>
Configuring the Journald Receiver requires careful consideration of various fields and options. By understanding the configuration fields you can effectively use the Journald Receiver to collect and process logs from the systemd journal.
</p>
<p>
In the next section, you will learn about the function of operators in Journald Receiver.
</p>
<p>
<a href="https://openobserve.ai/contactus">Get started for FREE with OpenObserve</a>
</p>
<h2>Operators in Journald Receiver</h2>

<p>
One of the key features of the Journald Receiver is its ability to use operators to process and transform logs. In this section, we will explore the operators used to process logs and how they can be chained together to transform log formats.
</p>
<h3>Operators Used to Process Logs</h3>

<p>
The Journald Receiver uses a variety of operators to process logs, including:
</p>
<ul>

<li>filter: Used to filter logs based on specific criteria.

<li>map: Used to transform logs by applying a function to each log entry.

<li>reduce: Used to aggregate logs by applying a function to each log entry.

<li>sort: Used to sort logs based on specific criteria.

<li>limit: Used to limit the number of logs returned.

<li>offset: Used to specify the starting point for log processing.
</li>
</ul>
<h3>Log Formats through Chaining Operators</h3>

<p>
The Journald Receiver allows you to chain operators together to transform log formats. 
</p>
<p>
Here is an example of how you can chain operators together to transform log formats:
</p>

<pre class="prettyprint">json
{
  "operators": [
    {
      "type": "filter",
      "criteria": {
        "level": "INFO"
      }
    },
    {
      "type": "map",
      "function": "log_transform"
    },
    {
      "type": "reduce",
      "function": "log_aggregate"
    }
  ]
}</pre>

<p>
In this example, the filter operator is used to filter logs based on the level field, and then the map operator is used to transform the filtered logs using the log_transform function. Finally, the reduce operator is used to aggregate the transformed logs using the log_aggregate function.
</p>
<p>
Whether you need to filter logs based on specific criteria, transform logs using a custom function, or aggregate logs using a specific aggregation function, the Journald Receiver has the operators you need to get the job done.
</p>
<p>
In the next section, you will explore a few more examples of configuration is Journald Receiver.
</p>
<h2>Example Configurations</h2>

<p>
Journald receivers offer granular control over the messages they capture through filtering options. Here are a few examples showing different filtering techniques:
</p>
<h3>Filtering by Units:</h3>

<p>
This example demonstrates capturing logs only from the sshd service and the kernel unit:
</p>

<pre class="prettyprint">receivers:
  my-receiver:
    type: journald
    units:
      - sshd.service
      - kernel</pre>

<p>
In this configuration, my-receiver will receive messages originating from the SSH daemon (sshd.service) and the kernel (kernel). Any messages from other system components will be excluded.
</p>
<h3>Filtering by Priority</h3>

<p>
This example captures only messages with a priority level of warning (warn) or higher:
</p>

<pre class="prettyprint">receivers:
  my-receiver:
    type: journald
    priority: warn</pre>

<p>
Here, my-receiver will only receive messages classified as warnings (warn), errors (err), or emergencies (emerg) by journald. Informational or debugging messages will be filtered out.
</p>
<p>
<a href="https://openobserve.ai/contactus">Get started for FREE with OpenObserve</a>
</p>
<h3>Combining Filtering Options with Matches:</h3>

<p>
This example gets even more specific, capturing messages from the apt service with a priority of info or higher, containing the keyword "package":
</p>

<pre class="prettyprint">receivers:
  my-receiver:
    type: journald
    units:
      - apt.service
    priority: info
    matches:
      - _SYSTEMD_UNIT=apt.service AND _MESSAGE LIKE '%package%'</pre>

<p>
This configuration combines unit filtering (apt.service) with priority filtering (info) and a message content filter using the matches option. The matches option allows for complex filtering expressions using logical operators (AND, OR, NOT) and wildcards (*). In this case, my-receiver will only receive messages from apt.service with an info level or higher that include the word "package".
</p>
<h3>Filtering by Message Identifier (PID):</h3>

<p>
This example captures logs only from a specific process identified by its process ID (PID) of 1234:
</p>

<pre class="prettyprint">receivers:
  my-receiver:
    type: journald
    matches:
      - _PID=1234</pre>

<p>
Here, my-receiver will solely capture messages associated with the process with PID 1234, regardless of the unit or message priority.
</p>
<h3>Excluding Specific Units:</h3>

<p>
This example excludes messages from the auditd service while capturing everything else:
</p>

<pre class="prettyprint">receivers:
  my-receiver:
    type: journald
    exclude-units:
      - auditd.service</pre>

<p>
In this configuration, my-receiver will receive messages from all units except auditd.service.
</p>
<p>
By understanding and combining these filtering techniques, you can tailor journald receivers to capture the specific system messages most relevant to your needs.
</p>
<p>
In the next section you will learn about matches and their conversion to journalctl arguments.
</p>
<p>
<a href="https://openobserve.ai/contactus">Get started for FREE with OpenObserve</a>
</p>
<h2>Understanding Matches</h2>

<p>
Journald receivers offer a powerful matches option for filtering messages based on various criteria. This section explains the concept of matches and how it translates to journalctl arguments for querying the journal.
</p>
<h3>Deciphering Matches Syntax</h3>

<p>
The matches option allows you to define filter expressions using key-value pairs and logical operators (AND, OR, NOT). Here's a breakdown of the syntax:
</p>
<ul>

<li>Key-Value Pairs: These define the filtering criteria. Each key represents a specific journald message field, and the value specifies the condition to match. Common keys include:
</li>
</ul>
<ul>

<ul><li>_PID: Process ID of the message source.

<li>_SYSTEMD_UNIT: Name of the unit that generated the message.

<li>MESSAGE: Content of the message itself (supports wildcards like *).

<li>PRIORITY: Priority level of the message (e.g., emerg, err, warn, info, debug).
</li>
</ul>


<li>Logical Operators: You can combine key-value pairs using AND (&&), OR (||), and NOT (!) operators to create complex filtering expressions.
</li>
</ul>
<h3>Translating Matches to Journalctl Arguments:</h3>

<p>
While journald receivers provide a convenient way to define filters within systemd configuration, you can also achieve similar filtering using the journalctl command-line tool. Here's how to convert matches expressions into equivalent journalctl arguments:
</p>
<ul>

<li>Direct Mapping: For simple key-value pairs, the key directly translates to a journalctl argument with a colon (:) followed by the value.
</li>
</ul>
<ul>

<ul><li>Example: matches: {_PID=1234} translates to journalctl _PID=1234
</li>
</ul>


<li>Wildcards: Wildcards in the matches value are preserved when translating to journalctl.
</li>
</ul>
<ul>

<ul><li>Example: matches: {MESSAGE LIKE '%package%'} translates to journalctl MESSAGE LIKE '%package%'
</li>
</ul>


<li>Logical Operators: The conversion for logical operators requires using brackets and the appropriate operator symbol in journalctl.
</li>
</ul>
<ul>

<ul><li>AND (&&) translates to (...) && (...) (enclose each sub-expression in brackets)

<li>OR (||) translates to (...) || (...)

<li>NOT (!) translates to ! followed by the sub-expression in brackets
</li>
</ul>
<p></ul>
Example Conversion:
</p>
<p>
Let's revisit the example from the previous section:
</p>
<p>
matches:
</p>

<pre class="prettyprint">  - _SYSTEMD_UNIT=apt.service AND _MESSAGE LIKE '%package%'</pre>

<p>
This translates to the following journalctl command:
</p>

<pre class="prettyprint">journalctl ( _SYSTEMD_UNIT=apt.service ) && ( MESSAGE LIKE '%package%' )</pre>

<p>
In short, the matches option in journald receivers offers a user-friendly way to define filtering expressions, while journalctl arguments provide a more granular approach for querying the journal with similar filtering capabilities.
</p>
<p>
In the next section, you will learn the details of setting up and deploying Journald Receiver in diverse environments.
</p>
<p>
<a href="https://openobserve.ai/contactus">Get started for FREE with OpenObserve</a>
</p>
<h2>Setup and Deployment</h2>

<p>
Here are some key guidelines for setting up and deploying the Journald Receiver in diverse environments:
</p>
<h3>Permissions and Setup</h3>

<ul>

<li>The Journald Receiver requires read access to the /run/systemd/journal/socket and /run/systemd/journal/dev-log files.

<li>Ensure the user running the Journald Receiver has the necessary permissions to access these files.

<li>On Linux systems, the systemd-journal group typically has read access to the journal files. Add the Journald Receiver user to this group.
</li>
</ul>
<h3>Docker Deployment</h3>

<ol>

<li>Create a Dockerfile that installs the Journald Receiver package and sets the necessary permissions:

<pre class="prettyprint">dockerfile
FROM alpine:latest

RUN apk add --no-cache journald-collector
RUN addgroup -S journald && adduser -S -G journald journald
RUN chown -R journald:journald /var/lib/journald-collector

USER journald
CMD ["journald-collector"]</pre>



<li>Build the Docker image:


<pre class="prettyprint">docker build -t journald-receiver .</pre>



<li>Run the Docker container, mapping the journal socket and log device:


<pre class="prettyprint">docker run -d \
  --name journald-receiver \
  --read-only \
  --mount type=bind,source=/run/systemd/journal/socket,target=/run/systemd/journal/socket \
  --mount type=bind,source=/run/systemd/journal/dev-log,target=/run/systemd/journal/dev-log \
  journald-receiver</pre></ol>

</ul><h3>Linux Deployment</h3>

<ol>

<li>Install the Journald Receiver package using your Linux distribution's package manager.

<li>Add the Journald Receiver user to the systemd-journal group:


<pre class="prettyprint">usermod -a -G systemd-journal journald</pre>



<li>Start the Journald Receiver service:


<pre class="prettyprint">systemctl start journald-collector</pre>

</ol><h3>Kubernetes Deployment</h3>

<ol>

<li>Create a Kubernetes deployment manifest with the necessary volumes and permissions:

<pre class="prettyprint">yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: journald-receiver
spec:
  replicas: 1
  selector:
    matchLabels:
      app: journald-receiver
  template:
    metadata:
      labels:
        app: journald-receiver
    spec:
      containers:
      - name: journald-receiver
        image: journald-receiver:latest
        volumeMounts:
        - name: journal-socket
          mountPath: /run/systemd/journal/socket
        - name: journal-log
          mountPath: /run/systemd/journal/dev-log
      volumes:
      - name: journal-socket
        hostPath:
          path: /run/systemd/journal/socket
      - name: journal-log
        hostPath:
          path: /run/systemd/journal/dev-log
      securityContext:
        runAsUser: 1000
        runAsGroup: 1000
        fsGroup: 1000</pre>



<li>Deploy the Journald Receiver to Kubernetes:

<pre class="prettyprint">kubectl apply -f journald-receiver-deployment.yaml</pre>

</li>
</ol>
<p>
These examples demonstrate how to set up the Journald Receiver in Docker, Linux, and Kubernetes environments. The key aspects are ensuring the necessary permissions, mapping the journal socket and log device, and running the Journald Receiver with the appropriate user and group.
</p>
<p>
In the next section, you will learn all you need to know about the system and data input documentation.
</p>
<p>
<a href="https://openobserve.ai/contactus">Get started for FREE with OpenObserve</a>
</p>
<h2>System and Data Input Documentation</h2>

<p>
Here are some key details on documenting system and data input for the Journald Receiver:
</p>
<h3>Documenting Setup and Configuration Procedures</h3>

<ul>

<li>Record the steps to install the Journald Receiver package on the target Linux distribution.

<li>Document the necessary permissions and user setup, such as adding the Journald Receiver user to the systemd-journal group.

<li>Provide instructions for configuring the Journald Receiver to read from the journal socket and log device.

<li>Include any additional configuration options, such as setting up filtering rules or specifying output destinations.
</li>
</ul>
<h3>Maintaining Details of Operational Environments</h3>

<ul>

<li>Document the hardware and software specifications of the systems running the Journald Receiver.

<li>Record the Linux distribution, kernel version, and any relevant system libraries or dependencies.

<li>Maintain a list of the Journald Receiver versions deployed across different environments.

<li>Document any unique configuration settings or environment-specific customizations.
</li>
</ul>
<h3>Recording Changes and Updates to Journald Receiver Configurations</h3>

<ul>

<li>Establish a versioning system to track changes to the Journald Receiver configuration files.

<li>Document the date, time, and author of each configuration change.

<li>Describe the reason for each change, such as bug fixes, feature additions, or performance optimizations.

<li>Record the impact of the changes, including any potential side effects or compatibility issues.

<li>Maintain a changelog that summarizes the major configuration updates over time.
</li>
</ul>
<p>
By following these guidelines, you can create comprehensive documentation that covers the setup, configuration, and maintenance of the Journald Receiver in your operational environments. 
</p>
<p>
This documentation will serve as a valuable reference for troubleshooting, auditing, and managing the Journald Receiver deployments.
</p>
<p>
In the last section, you will see how OpenObserve can help with Journald Receiver.
</p>
<h3>How OpenObserve helps with Journald Receiver!</h3>

<p>
OpenObserve helps with the Journald Receiver by providing a cloud-native observability platform that supports the collection and processing of journal logs. Here are some key ways OpenObserve assists with the Journald Receiver:
</p>
<ul>

<li>Data Storage: OpenObserve supports various data storage options such as S3, MinIO, GCS, and Azure Blob, which can be used to store the journal logs collected by the Journald Receiver.

<li>Query Language: OpenObserve has a SQL-based query language that allows users to query and analyze the collected logs, providing a powerful tool for log analysis and filtering.

<li>GUI and Performance: OpenObserve's advanced GUI and Rust-based architecture ensure high performance and ease of use, making it a suitable choice for managing and analyzing large volumes of journal logs.

<li>Integration with Other Tools: OpenObserve is compatible with log forwarders like Fluentbit, Fluentd, and Vector, which can be used to forward logs to OpenObserve for processing and analysis.

<li>Cost-Effective: OpenObserve is designed to provide significantly lower storage costs compared to Elasticsearch, making it a cost-effective solution for managing and analyzing journal logs.
</li>
</ul>
<p>
By leveraging OpenObserve's features, users can efficiently collect, store, and analyze journal logs, providing valuable insights into system performance and behavior.
</p>
<p>
Here are the relevant links to explore the OpenObserve platform:
</p>
<p>
<a href="https://openobserve.ai/contactus">Get started for FREE with OpenObserve</a>
</p>
<ul>

<li>OpenObserve Website: 
<ul>
 
<li><a href="https://openobserve.ai/">OpenObserve</a>
</li> 
</ul>

<li>OpenObserve Article: 
<ul>
 
<li><a href="https://medevel.com/openobserve/">OpenObserve: The Ultimate Open-Source Platform for Log and ...</a>
</li> 
</ul>

<li>OpenObserve About Us: 
<ul>
 
<li><a href="https://openobserve.ai/about/">About Us | Open Source Observability Platform for Logs, Metrics, Traces ...</a>
</li> 
</ul>

<li>OpenObserve Documentation: 
<ul>
 
<li><a href="https://openobserve.ai/docs/">OpenObserve Documentation</a>
</li> 
</ul>

<li>OpenObserve GitHub Repository: 
<ul>
 
<li><a href="https://github.com/openobserve">OpenObserve - GitHub</a>
</li> 
</ul>
</li> 
</ul>
<h3>Conclusion</h3>

<p>
Journald receivers act as gateways to capture and process system messages, providing valuable insights into system behavior. This comprehensive guide equips you with the knowledge to configure and deploy Journald receivers effectively, along with best practices for documentation.
</p>
<p>
Furthermore, leverage OpenObserve, a cloud-native observability platform, to streamline your Journald receiver management. OpenObserve offers features like data storage, a powerful query language, a user-friendly GUI, and cost-effective log management. By combining Journald receivers with OpenObserve's capabilities, you can achieve proactive monitoring and troubleshooting for a well-functioning system.
</p>
<h3>Resources for Further Learning</h3>

<p>
<a href="https://docs.splunk.com/Documentation/Splunk/9.2.1/Data/CollecteventsfromJournalD">Get data with the Journald input</a>
</p>
<p>
<a href="https://docs.datadoghq.com/integrations/journald/">Journald</a>
</p>
<p>
<a href="https://sematext.com/blog/journald-logging-tutorial/">Logging w/ journald: Why use it </a>
</p>
<p>
<a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/2332">Add journald receiver</a>
</p>
<p>
<a href="https://docs.elastic.co/integrations/journald">Custom Journald logs | Documentation</a>
</p>
